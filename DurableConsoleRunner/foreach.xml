<?xml version="1.0"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml"
       version="1.0"
       datamodel="csharp"
       initial="loop">

  <datamodel>
    <data id="items" expr="new [] { 1, 2, 3, 4, 5 }"/>
    <data id="sum" expr="0" />
  </datamodel>

  <state id="loop">

    <onentry>
      <foreach array="items" item="arrayItem">
        <assign location="sum" expr="sum + arrayItem" />
        <log expr="&quot;item = &quot; + arrayItem" />
      </foreach>
    </onentry>
    
    <transition cond="sum &gt;= 15" target="done"/>
    
  </state>

  <final id="done">
    <onentry>
      <log expr="&quot;sum = &quot; + sum" />
    </onentry>
  </final>

</scxml>
