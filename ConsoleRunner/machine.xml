<?xml version="1.0"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml"
       version="1.0"
       datamodel="csharp"
       initial="off">

  <!--  trivial 5 second microwave oven example -->
  <datamodel>
    <data id="cook_time" expr="5"/>
    <data id="door_closed" expr="true"/>
    <data id="timer" expr="0"/>
  </datamodel>

  <state id="off">
    <onentry>
      <log expr="&quot;enter off state&quot;" />
    </onentry>
    <transition event="turn.on" target="on"/>
    <onexit>
      <log expr="&quot;exit off state&quot;" />
    </onexit>
  </state>

  <state id="on">
    <onentry>
      <log expr="&quot;enter on state&quot;" />
    </onentry>

    <initial>
      <transition target="idle"/>
    </initial>

    <transition event="turn.off" target="off"/>
    <transition cond="data.timer &gt;= data.cook_time" target="off"/>

    <state id="idle">
      <onentry>
        <log expr="&quot;enter idle state&quot;" />
      </onentry>

      <transition cond="data.door_closed" target="cooking"/>
      <transition event="door.close" target="cooking">
        <assign location="door_closed" expr="true"/>
      </transition>
      
      <onexit>
        <log expr="&quot;exit idle state&quot;" />
      </onexit>
    </state>

    <state id="cooking">
      <onentry>
        <log expr="&quot;enter cooking state&quot;" />
      </onentry>
      
      <transition event="door.open" target="idle">
        <assign location="door_closed" expr="false"/>
      </transition>
      <transition event="time">
        <assign location="timer" expr="data.timer + 1"/>
      </transition>

      <onexit>
        <log expr="&quot;exit cooking state&quot;" />
      </onexit>
    </state>

    <onexit>
      <log expr="&quot;exit on state&quot;" />
    </onexit>

  </state>

</scxml>
